<!--reportDetail.wxml-->
<view class="container">
  <!-- 报告标题区域 -->
  <view class="report-header">
    <view class="report-title">{{reportTitle}}</view>
    <view class="report-subtitle">{{reportSubtitle}}</view>
    <view class="report-date">{{reportDate}}</view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在加载报告详情...</text>
  </view>

  <!-- 错误状态 -->
  <view wx:elif="{{error}}" class="error-container">
    <view class="error-icon">⚠</view>
    <text class="error-text">{{errorMessage}}</text>
    <button class="retry-btn" bindtap="getReportDetail" data-id="{{reportId}}">重试</button>
  </view>

  <!-- 报告内容区域 -->
  <view wx:else class="report-content">
    <!-- 报告缩略图 -->
    <!-- <view wx:if="{{reportThumbnail}}" class="report-thumbnail">
      <image src="{{reportThumbnail}}" mode="aspectFill" class="thumbnail-image" />
    </view> -->

    <!-- 报告基本信息 -->
    <view class="report-info">
      <view class="info-item">
        <text class="info-label">来源：</text>
        <text class="info-value">{{reportSource}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">分类：</text>
        <text class="info-value">{{reportCategory}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">页数：</text>
        <text class="info-value">{{reportPages}}页</text>
      </view>
      <view class="info-item">
        <text class="info-label">作者：</text>
        <text class="info-value">{{reportAuthor}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">发布日期：</text>
        <text class="info-value">{{reportPublishDate}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">价格：</text>
        <text class="info-value {{reportIsFree ? 'free' : 'paid'}}">
          {{reportIsFree ? '免费' : reportPrice}}
        </text>
      </view>
    </view>

    <!-- 报告标签 -->
    <view wx:if="{{reportTags.length > 0}}" class="report-tags">
      <text class="tags-title">标签：</text>
      <view class="tags-list">
        <text wx:for="{{reportTags}}" wx:key="index" class="tag-item">{{item}}</text>
      </view>
    </view>

    <!-- 报告摘要 -->
    <view class="report-summary">
      <view class="summary-title">报告摘要</view>
      <text class="summary-content">{{reportSummary}}</text>
    </view>

    <!-- 报告统计信息 -->
    <!-- <view class="report-stats">
      <view class="stat-item">
        <text class="stat-number">{{reportViewCount}}</text>
        <text class="stat-label">浏览次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{reportDownloadCount}}</text>
        <text class="stat-label">下载次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{reportRating}}</text>
        <text class="stat-label">评分</text>
      </view>
    </view> -->

    <!-- 报告评论 -->
    <view wx:if="{{reportComments.length > 0}}" class="report-comments">
      <view class="comments-title">用户评论</view>
      <view wx:for="{{reportComments}}" wx:key="index" class="comment-item">
        <view class="comment-header">
          <text class="comment-user">{{item.userName}}</text>
          <text class="comment-time">{{item.createTime}}</text>
        </view>
        <text class="comment-content">{{item.content}}</text>
      </view>
    </view>
  </view>

  <!-- 底部操作按钮 -->
  <view class="bottom-actions">
    <button class="action-btn download-btn" bindtap="downloadDocument">
      <!-- <text class="btn-icon">📥</text> -->
      <text class="btn-text">{{reportIsFree ? '免费下载' : '付费下载'}}</text>
    </button>
    
    <button class="action-btn preview-btn" bindtap="goToPreview">
      <!-- <text class="btn-icon">👁️</text> -->
      <text class="btn-text">预览报告</text>
    </button>
  </view>
</view>
