<!--reportDetail.wxml-->
<view class="container">
  <!-- æŠ¥å‘Šæ ‡é¢˜åŒºåŸŸ -->
  <view class="report-header">
    <view class="report-title">{{reportTitle}}</view>
    <view class="report-subtitle">{{reportSubtitle}}</view>
    <view class="report-date">{{reportDate}}</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨åŠ è½½æŠ¥å‘Šè¯¦æƒ…...</text>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:elif="{{error}}" class="error-container">
    <view class="error-icon">âš </view>
    <text class="error-text">{{errorMessage}}</text>
    <button class="retry-btn" bindtap="getReportDetail" data-id="{{reportId}}">é‡è¯•</button>
  </view>

  <!-- æŠ¥å‘Šå†…å®¹åŒºåŸŸ -->
  <view wx:else class="report-content">
    <!-- æŠ¥å‘Šç¼©ç•¥å›¾ -->
    <!-- <view wx:if="{{reportThumbnail}}" class="report-thumbnail">
      <image src="{{reportThumbnail}}" mode="aspectFill" class="thumbnail-image" />
    </view> -->

    <!-- æŠ¥å‘ŠåŸºæœ¬ä¿¡æ¯ -->
    <view class="report-info">
      <view class="info-item">
        <text class="info-label">æ¥æºï¼š</text>
        <text class="info-value">{{reportSource}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">åˆ†ç±»ï¼š</text>
        <text class="info-value">{{reportCategory}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">é¡µæ•°ï¼š</text>
        <text class="info-value">{{reportPages}}é¡µ</text>
      </view>
      <view class="info-item">
        <text class="info-label">ä½œè€…ï¼š</text>
        <text class="info-value">{{reportAuthor}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">å‘å¸ƒæ—¥æœŸï¼š</text>
        <text class="info-value">{{reportPublishDate}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">ä»·æ ¼ï¼š</text>
        <text class="info-value {{reportIsFree ? 'free' : 'paid'}}">
          {{reportIsFree ? 'å…è´¹' : reportPrice}}
        </text>
      </view>
    </view>

    <!-- æŠ¥å‘Šæ ‡ç­¾ -->
    <view wx:if="{{reportTags.length > 0}}" class="report-tags">
      <text class="tags-title">æ ‡ç­¾ï¼š</text>
      <view class="tags-list">
        <text wx:for="{{reportTags}}" wx:key="index" class="tag-item">{{item}}</text>
      </view>
    </view>

    <!-- æŠ¥å‘Šæ‘˜è¦ -->
    <view class="report-summary">
      <view class="summary-title">æŠ¥å‘Šæ‘˜è¦</view>
      <text class="summary-content">{{reportSummary}}</text>
    </view>

    <!-- æŠ¥å‘Šç»Ÿè®¡ä¿¡æ¯ -->
    <!-- <view class="report-stats">
      <view class="stat-item">
        <text class="stat-number">{{reportViewCount}}</text>
        <text class="stat-label">æµè§ˆæ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{reportDownloadCount}}</text>
        <text class="stat-label">ä¸‹è½½æ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{reportRating}}</text>
        <text class="stat-label">è¯„åˆ†</text>
      </view>
    </view> -->

    <!-- æŠ¥å‘Šè¯„è®º -->
    <view wx:if="{{reportComments.length > 0}}" class="report-comments">
      <view class="comments-title">ç”¨æˆ·è¯„è®º</view>
      <view wx:for="{{reportComments}}" wx:key="index" class="comment-item">
        <view class="comment-header">
          <text class="comment-user">{{item.userName}}</text>
          <text class="comment-time">{{item.createTime}}</text>
        </view>
        <text class="comment-content">{{item.content}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
  <view class="bottom-actions">
    <button class="action-btn download-btn" bindtap="downloadDocument">
      <!-- <text class="btn-icon">ğŸ“¥</text> -->
      <text class="btn-text">{{reportIsFree ? 'å…è´¹ä¸‹è½½' : 'ä»˜è´¹ä¸‹è½½'}}</text>
    </button>
    
    <button class="action-btn preview-btn" bindtap="goToPreview">
      <!-- <text class="btn-icon">ğŸ‘ï¸</text> -->
      <text class="btn-text">é¢„è§ˆæŠ¥å‘Š</text>
    </button>
  </view>
</view>
