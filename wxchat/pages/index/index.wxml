<!--index.wxml-->
<view class="container">
  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-section">
    <view class="search-bar">
      <input 
        class="search-input" 
        placeholder="è¯·è¾“å…¥å…³é”®è¯æŸ¥è¯¢" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
      />
      <button class="search-btn" bindtap="onSearch">æœç´¢</button>
    </view>
  </view>

  <!-- æŠ¥å‘Šåˆ—è¡¨ -->
  <view class="reports-section">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-container" wx:if="{{loading && reports.length === 0}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- æŠ¥å‘Šåˆ—è¡¨ -->
    <view class="report-item" 
          wx:for="{{filteredReports}}" 
          wx:key="id"
          bindtap="onReportTap"
          data-id="{{item.id}}">
      
      <!-- æŠ¥å‘Šç¼©ç•¥å›¾ -->
      <view class="report-thumbnail">
        <image class="thumbnail-img" src="{{item.thumbnail}}" mode="aspectFill"></image>
      </view>
      
      <!-- æŠ¥å‘Šä¿¡æ¯ -->
      <view class="report-info">
        <view class="report-title">{{item.title}}</view>
        <view class="report-meta">
          <text class="report-source">{{item.source}}</text>
          <text class="report-category">{{item.category}}</text>
          <text class="report-pages">å…±{{item.pages}}é¡µ</text>
        </view>
        <!-- æ ‡ç­¾ä¿¡æ¯ -->
        <view class="report-tags" wx:if="{{item.tags && item.tags.length > 0}}">
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
        </view>
      </view>
      
      <!-- å‘å¸ƒæ—¶é—´ -->
      <view class="report-date">
        <text class="date-icon">ğŸ•</text>
        <text class="date-text">{{item.publishDate}}</text>
      </view>
    </view>

    <!-- æ— æœç´¢ç»“æœæç¤º -->
    <view class="no-results" wx:if="{{filteredReports.length === 0 && !loading && searchKeyword}}">
      <text>æœªæ‰¾åˆ°ç›¸å…³æŠ¥å‘Š</text>
    </view>

    <!-- ç©ºçŠ¶æ€æç¤º -->
    <view class="empty-state" wx:if="{{filteredReports.length === 0 && !loading && !searchKeyword}}">
      <text>æš‚æ— æŠ¥å‘Šæ•°æ®</text>
    </view>

    <!-- åŠ è½½æ›´å¤šæç¤º -->
    <view class="load-more" wx:if="{{filteredReports.length > 0}}">
      <view wx:if="{{loading}}" class="loading-more">
        <view class="loading-spinner small"></view>
        <text>åŠ è½½ä¸­...</text>
      </view>
      <view wx:elif="{{!hasMore}}" class="no-more">
        <text>å·²åŠ è½½å…¨éƒ¨æ•°æ®</text>
      </view>
      <view wx:else class="pull-up">
        <text>ä¸Šæ‹‰åŠ è½½æ›´å¤š</text>
      </view>
    </view>
  </view>
</view>
