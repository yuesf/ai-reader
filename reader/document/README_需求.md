# AI-Reader 产品需求文档

## 1. 项目概述

### 1.1 项目背景
AI-Reader 是一个用于文件上传、报告生成与管理的AI阅读辅助系统，面向需要处理和分析文档内容的用户。

### 1.2 产品目标
提供文档上传、解析、报告生成与管理功能，帮助用户高效处理和分析各类文档内容。

### 1.3 目标用户
- 需要处理大量文档内容的企业用户
- 需要对文档进行分析和提取关键信息的个人用户
- 希望通过AI技术辅助阅读和理解文档内容的用户

## 2. 功能需求

### 2.1 核心功能模块

#### 2.1.1 用户认证与权限管理
- 用户登录：通过用户名和密码进行身份验证，获取访问令牌
- Token校验：验证访问令牌的有效性
- 用户退出：清除本地Token信息，结束会话
- 权限控制：除公开接口外，所有接口都需要通过认证访问

#### 2.1.2 报告管理
- 报告列表查询：支持分页、排序、筛选的报告列表展示
- 报告详情查看：查看单个报告的详细信息
- 报告创建：支持创建新的报告，关联上传的文档文件
- 报告删除：支持单个或批量删除报告
- 报告搜索：支持按关键词、分类、来源等条件搜索报告

#### 2.1.3 文件上传与存储
- 报告文件上传：专门用于上传报告类文档文件
- 图片文件上传：专门用于上传图片文件
- 通用文件上传：支持任意类型文件的上传
- 文件删除：支持删除已上传的文件
- 文件存储：使用阿里云OSS进行文件存储，支持私有文件访问控制

### 2.2 非功能性需求

#### 2.2.1 安全性
- 用户身份验证：通过JWT令牌进行用户身份验证
- 文件访问控制：私有文件通过临时访问链接进行访问控制
- 数据传输安全：通过HTTPS协议保障数据传输安全

#### 2.2.2 性能要求
- 响应时间：接口响应时间不超过3秒
- 并发处理：支持多用户同时访问系统
- 文件上传：支持大文件分片上传（根据配置限制）

#### 2.2.3 可用性
- 系统可用性：保证99%以上的系统可用性
- 错误处理：完善的错误提示和异常处理机制
- 用户体验：提供友好的用户界面和操作流程

## 3. 用户角色

### 3.1 普通用户
- 可以查看公开的报告列表和详情
- 无法进行创建、修改、删除等操作

### 3.2 管理员用户
- 拥有普通用户的所有权限
- 可以创建新的报告
- 可以上传、删除文件
- 可以删除报告

## 4. 业务流程

### 4.1 用户登录流程
1. 用户访问系统登录页面
2. 输入用户名和密码
3. 系统验证用户身份
4. 验证通过后返回JWT访问令牌
5. 用户使用令牌访问系统功能

### 4.2 报告创建流程
1. 用户登录系统
2. 上传报告文件到系统
3. 系统将文件存储到阿里云OSS并返回文件信息
4. 用户填写报告基本信息
5. 系统创建报告并关联上传的文件

### 4.3 报告查看流程
1. 用户访问报告列表页面
2. 系统展示报告列表（支持筛选和搜索）
3. 用户点击某个报告查看详情
4. 系统返回报告详细信息
5. 对于私有文件，系统生成临时访问链接供用户下载

## 5. 接口规范

### 5.1 认证相关接口
- POST /v1/auth/login - 用户登录
- GET /v1/auth/verify - Token校验
- POST /v1/auth/logout - 用户退出

### 5.2 报告管理接口
- POST /v1/reports - 获取报告列表
- GET /v1/reports/{id} - 获取报告详情
- POST /v1/reports/create - 创建报告
- DELETE /v1/reports/{id} - 删除报告
- POST /v1/reports/delete - 批量删除报告

### 5.3 文件上传接口
- POST /v1/upload/report - 上传报告文件
- POST /v1/upload/image - 上传图片文件
- POST /v1/upload/file - 通用文件上传
- DELETE /v1/upload/file - 删除文件

## 6. 数据结构

### 6.1 报告数据结构
- 报告ID：唯一标识符
- 标题：报告标题
- 摘要：报告摘要信息
- 来源：报告来源
- 分类：报告分类
- 页数：报告页数
- 文件大小：报告文件大小
- 发布日期：报告发布日期
- 更新日期：报告更新日期
- 缩略图：报告缩略图URL
- 标签：报告标签列表
- 下载次数：报告下载次数
- 浏览次数：报告浏览次数
- 是否免费：报告是否免费
- 价格：报告价格（针对付费报告）
- 报告文件URL：报告文件访问地址
- 报告文件名：报告文件名称
- 报告文件大小：报告文件大小描述

### 6.2 文件信息数据结构
- 文件ID：唯一标识符
- 文件名：存储在OSS中的文件名
- 原始文件名：用户上传时的原始文件名
- 文件大小：文件大小（字节）
- 文件类型：文件扩展名
- 文件夹：存储文件夹分类
- 上传时间：文件上传时间
- 上传用户ID：上传用户的标识符
- 状态：文件状态（活跃/已删除）
- 请求ID：OSS请求ID

## 7. 系统约束

### 7.1 技术约束
- 后端技术：Spring Boot + MyBatis + SQLite
- 前端技术：Vue 3 + Vite
- 小程序：微信小程序原生开发
- 文件存储：阿里云OSS

### 7.2 业务约束
- 报告查询必须带条件：关键词或日期范围
- 无查询条件时默认查询最近30天的数据
- 分页查询页码从1开始，每页最多50条记录
- 文件上传大小和类型受配置限制