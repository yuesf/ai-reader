server:
  port: 8080
  servlet:
    context-path: /

spring:
  application:
    name: reader
  
  servlet:
    multipart:
      enabled: true
      max-file-size: 500MB
      max-request-size: 500MB
      file-size-threshold: 2KB
      location: ${java.io.tmpdir}
  
  datasource:
    # 统一数据源配置（主业务 + 埋点数据）
    driver-class-name: org.sqlite.JDBC
    url: jdbc:sqlite:reader.db
    username: 
    password: 
  
  jackson:
    date-format: yyyy-MM-dd
    time-zone: GMT+8
    default-property-inclusion: non_null

  sql:
    init:
      mode: always
      schema-locations: classpath:schema.sql
      data-locations: classpath:data.sql
      continue-on-error: true

mybatis:
  mapper-locations: classpath*:mappers/**/*.xml
  type-aliases-package: com.yuesf.aireader.entity,com.yuesf.aireader.entity.tracking
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: false

logging:
  level:
    com.yuesf.aireader: INFO
    org.springframework.web: warn
    org.apache.ibatis: INFO
    jdbc.sqlonly: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

app:
#  api:
#    version: v1
#    base-url: https://yuesf.cn/v1
  
  # 阿里云OSS配置
  oss:
    endpoint: https://oss-cn-hangzhou.aliyuncs.com
    access-key-id: ${OSS_ACCESS_KEY_ID:your_oss_access_key_id}
    access-key-secret: ${OSS_ACCESS_KEY_SECRET:your_oss_access_key_secret}
    bucket-name: ai-doc-low
    # 文件上传配置
    upload:
      max-file-size: 500MB
      allowed-extensions: jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,ppt,pptx
      base-url: https://ai-doc-low.oss-cn-hangzhou.aliyuncs.com

# 微信小程序配置
wechat:
  mini:
    appid: ${WECHAT_MINI_APPID:your_mini_program_appid}
    secret: ${WECHAT_MINI_SECRET:your_mini_program_secret}
